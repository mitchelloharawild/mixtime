# mixtime

mixtime provides flexible time classes for time series analysis and
forecasting with mixed temporal granularities. It is designed for
handling temporal data at different frequencies, making it ideal for:

- Changing observation frequencies (e.g., historical quarterly records
  now reported monthly)
- Analysis involving data at different temporal resolutions (e.g.,
  quarterly tourism and monthly turnover)
- Forecasting with temporal reconciliation across multiple time scales

## Key Features

**üìà Linear Time** - Create linear time vectors with
[`linear_time()`](https://pkg.mitchelloharawild.com/mixtime/reference/linear_time.md)
or with helpers: \*
[`yearquarter()`](https://pkg.mitchelloharawild.com/mixtime/reference/linear_time_helpers.md),
[`yearmonth()`](https://pkg.mitchelloharawild.com/mixtime/reference/linear_time_helpers.md),
[`yearweek()`](https://pkg.mitchelloharawild.com/mixtime/reference/linear_time_helpers.md),
[`yearmonthday()`](https://pkg.mitchelloharawild.com/mixtime/reference/linear_time_helpers.md)

**üîÑ Cyclical Time** - Create cyclical time vectors with
[`cyclical_time()`](https://pkg.mitchelloharawild.com/mixtime/reference/cyclical_time.md)
or with helpers: \*
[`month_of_year()`](https://pkg.mitchelloharawild.com/mixtime/reference/cyclical_time_helpers.md),
[`day_of_year()`](https://pkg.mitchelloharawild.com/mixtime/reference/cyclical_time_helpers.md),
[`day_of_month()`](https://pkg.mitchelloharawild.com/mixtime/reference/cyclical_time_helpers.md),
[`day_of_week()`](https://pkg.mitchelloharawild.com/mixtime/reference/cyclical_time_helpers.md),
[`week_of_year()`](https://pkg.mitchelloharawild.com/mixtime/reference/cyclical_time_helpers.md)

**üï∞Ô∏è Time types** \* Discrete and continuous time models \* Timezone
support for all chronons \* Custom granule sizes (e.g.¬†`week(2L)` for
fortnights) \* Mixed granularity vectors for different temporal
resolution over time (or series)

**üìÖ Calendar Systems** - Support for several calendars: \*
`cal_gregorian` - Gregorian dates (e.g.¬†2026-02-17) \* `cal_isoweek` -
ISO week dates (e.g.¬†2026-W8-Tue) \* More calendars coming, including
custom censored calendars

**üßÆ Temporal Operations** \* Rounding:
[`floor_time()`](https://pkg.mitchelloharawild.com/mixtime/reference/round_time.md),
[`round_time()`](https://pkg.mitchelloharawild.com/mixtime/reference/round_time.md),
[`ceiling_time()`](https://pkg.mitchelloharawild.com/mixtime/reference/round_time.md)
\* Sequencing: [`seq()`](https://rdrr.io/r/base/seq.html) for linear and
cyclical time points

## Installation

The development version can be installed from
[GitHub](https://github.com/mitchelloharawild/mixtime) with:

``` r
# install.packages("remotes")
remotes::install_github("mitchelloharawild/mixtime")
```

## Usage

``` r
library(mixtime)
demo_time <- as.POSIXct("2026-02-22 18:30:42", tz = "UTC")
demo_date <- as.Date("2026-02-22")
```

The mixtime package is designed around the time units of calendars.
These time units are used to create and manipulate time vectors.

### Calendars and time units

Calendars have a `cal_*` prefix, which contain a set of time units that
can be accessed with `<cal>$<unit>`.

``` r
# The Gregorian calendar
cal_gregorian
#> <cal_gregorian>
#> Time units:
#>   - year
#>   - quarter
#>   - month
#>   - day
#>   - hour
#>   - minute
#>   - second
#>   - millisecond

# A 1-month time unit
cal_gregorian$month(1L) # (1L is integer 1)
#> <mixtime::tu_month> int 1
#>  @ tz: chr "UTC"

# A 2-week time unit (fortnights)
cal_isoweek$week(2L)
#> <mixtime::tu_week> int 2
#>  @ tz: chr "UTC"
```

### Linear Time

A linear time vector uses time units to define the resolution of time
points, known as a `chronon` (the smallest unit of time). When the input
time has a different resolution than the `chronon`, it will be
automatically converted.

``` r
linear_time(demo_date, chronon = cal_gregorian$month(1L))
#> <mixtime[1]>
#> [1] 24313
```

Discrete time models (integer-based values) are used by default, however
continuous time models (double-based values) can be used with
`discrete = FALSE` to allow fractional chronons.

``` r
# February 22nd is 75% through the month (in non-leap years)
linear_time(demo_date, chronon = cal_gregorian$month(1L), discrete = FALSE)
#> <mixtime[1]>
#> [1] 24313-75.0%
```

Linear time helper functions are available to quickly create common time
points.

``` r
# Create time vectors at different granularities
yearquarter(demo_date) + 0:7
#> <mixtime[8]>
#> [1] 2026-Q1 2026-Q2 2026-Q3 2026-Q4 2027-Q1 2027-Q2 2027-Q3 2027-Q4
yearmonth(demo_date) + 0:11
#> <mixtime[12]>
#>  [1] 2026-Feb 2026-Mar 2026-Apr 2026-May 2026-Jun 2026-Jul 2026-Aug 2026-Sep
#>  [9] 2026-Oct 2026-Nov 2026-Dec 2027-Jan
yearweek(demo_date) + 0:10
#> <mixtime[11]>
#>  [1] 2026-W8  2026-W9  2026-W10 2026-W11 2026-W12 2026-W13 2026-W14 2026-W15
#>  [9] 2026-W16 2026-W17 2026-W18
yearmonthday(demo_date) + 0:6
#> <mixtime[7]>
#> [1] 2026-Feb-22 2026-Feb-23 2026-Feb-24 2026-Feb-25 2026-Feb-26 2026-Feb-27
#> [7] 2026-Feb-28
```

The mixtime package allows time of different granulities to be combined
in a single vector.

``` r
c(
  year(demo_date), yearquarter(demo_date), 
  yearmonth(demo_date), yearweek(demo_date)
)
#> <mixtime[4]>
#> [1] 2026     2026-Q1  2026-Feb 2026-W8
```

### Cyclical Time

A cyclical time vector is defined by two calendar time units: a
`chronon` (the smaller unit of time) and a `cycle` (the larger unit that
the `chronon` loops over).

``` r
# The `calendar` argument provides a masking scope to `chronon` and `cycle`
cyclical_time(demo_date, chronon = day(1L), cycle = week(1L), calendar = cal_isoweek)
#> <mixtime[1]>
#> [1] Sun
```

There are several cyclical time helper functions for convenience.

``` r
# Extract cyclical components
month_of_year(demo_date)
#> <mixtime[1]>
#> [1] Feb
week_of_year(demo_date)
#> <mixtime[1]>
#> [1] W8
day_of_week(demo_date)
#> <mixtime[1]>
#> [1] Sun

# Continuous cyclical time shows progress through chronons
day_of_week(demo_time, discrete = FALSE)
#> <mixtime[1]>
#> [1] Sun-77.1%
```

### Timezones

All linear and cyclical time vectors support timezones via the `tz`
argument.

``` r
demo_time
#> [1] "2026-02-22 18:30:42 UTC"
# Same day (Sunday) in LA
yearmonthday(demo_time, tz = "America/Los_Angeles")
#> <mixtime[1]>
#> [1] 2026-Feb-22-PST
yearmonthday(demo_time, tz = "America/Los_Angeles", discrete = FALSE)
#> <mixtime[1]>
#> [1] 2026-Feb-22-10.5%-PST
day_of_week(demo_time, tz = "America/Los_Angeles")
#> <mixtime[1]>
#> [1] Sun

# Next day (Monday) in Melbourne (23% through the 23rd)
yearmonthday(demo_time, tz = "Australia/Melbourne")
#> <mixtime[1]>
#> [1] 2026-Feb-23-AEDT
yearmonthday(demo_time, tz = "Australia/Melbourne", discrete = FALSE)
#> <mixtime[1]>
#> [1] 2026-Feb-23-68.8%-AEDT
day_of_week(demo_time, tz = "Australia/Melbourne")
#> <mixtime[1]>
#> [1] Mon
```

### Temporal Manipulation

Linear time points can be adjusted to the floor, ceiling, or rounded to
a specified time unit.

``` r
# Round dates to different granularities
floor_time(demo_date, cal_gregorian$month(1L))
#> [1] "2026-02-01"
round_time(demo_date, cal_isoweek$week(1L))
#> [1] "2026-02-23"
ceiling_time(demo_date, cal_gregorian$month(1L))
#> [1] "2026-03-01"
```

### Time Sequences

The [`seq()`](https://rdrr.io/r/base/seq.html) function creates
sequences of time points iterating by a given time unit.

``` r
# Integer increments (advances by chronon's natural unit)
seq(yearmonth(demo_date), by = 1L, length.out = 10)
#> <mixtime[10]>
#>  [1] 2026-Feb 2026-Mar 2026-Apr 2026-May 2026-Jun 2026-Jul 2026-Aug 2026-Sep
#>  [9] 2026-Oct 2026-Nov

# Calendar time units allow sequencing by other units
seq(yearmonthday(demo_date), by = cal_gregorian$month(1L), length.out = 8)
#> <mixtime[8]>
#> [1] 2026-Feb-22 2026-Mar-22 2026-Apr-22 2026-May-22 2026-Jun-22 2026-Jul-22
#> [7] 2026-Aug-22 2026-Sep-22
```

# Package index

## Linear Time Representations

Functions to create and work with linear time representations

### Linear Time Vectors

The general function for creating linear time representations

- [`linear_time()`](https://pkg.mitchelloharawild.com/mixtime/reference/linear_time.md)
  : Linear time points

### Linear Time Helpers

Convenience functions for common linear time representations

- [`year()`](https://pkg.mitchelloharawild.com/mixtime/reference/linear_time_helpers.md)
  [`yearquarter()`](https://pkg.mitchelloharawild.com/mixtime/reference/linear_time_helpers.md)
  [`yearmonth()`](https://pkg.mitchelloharawild.com/mixtime/reference/linear_time_helpers.md)
  [`yearmonthday()`](https://pkg.mitchelloharawild.com/mixtime/reference/linear_time_helpers.md)
  [`yearweek()`](https://pkg.mitchelloharawild.com/mixtime/reference/linear_time_helpers.md)
  : Linear time helper functions

## Cyclical Time Representations

Functions to create and work with cyclical time representations

### Cyclical Time Vectors

The general function for creating cyclical time representations

- [`cyclical_time()`](https://pkg.mitchelloharawild.com/mixtime/reference/cyclical_time.md)
  : Cyclical time points

### Cyclical Time Helpers

Convenience functions for common cyclical time representations

- [`month_of_year()`](https://pkg.mitchelloharawild.com/mixtime/reference/cyclical_time_helpers.md)
  [`day_of_year()`](https://pkg.mitchelloharawild.com/mixtime/reference/cyclical_time_helpers.md)
  [`day_of_month()`](https://pkg.mitchelloharawild.com/mixtime/reference/cyclical_time_helpers.md)
  [`day_of_week()`](https://pkg.mitchelloharawild.com/mixtime/reference/cyclical_time_helpers.md)
  [`week_of_year()`](https://pkg.mitchelloharawild.com/mixtime/reference/cyclical_time_helpers.md)
  : Cyclical time helpers

## Time Manipulation

Functions for manipulating and transforming time objects.

- [`seq(`*`<mixtime>`*`)`](https://pkg.mitchelloharawild.com/mixtime/reference/seq.mixtime.md)
  [`seq(`*`<mt_linear>`*`)`](https://pkg.mitchelloharawild.com/mixtime/reference/seq.mixtime.md)
  [`seq(`*`<mt_cyclical>`*`)`](https://pkg.mitchelloharawild.com/mixtime/reference/seq.mixtime.md)
  : Generate sequences of mixtime values
- [`round_time()`](https://pkg.mitchelloharawild.com/mixtime/reference/round_time.md)
  [`ceiling_time()`](https://pkg.mitchelloharawild.com/mixtime/reference/round_time.md)
  [`floor_time()`](https://pkg.mitchelloharawild.com/mixtime/reference/round_time.md)
  : Round, floor and ceiling transformations for time objects

## Calendar Systems

Calendar systems are composed of their associated time units. These
define how time is divided and measured in different calendar systems.

### Gregorian Calendar System

The standard civil calendar system with years, quarters, months, days,
and sub-day units.

- [`cal_gregorian`](https://pkg.mitchelloharawild.com/mixtime/reference/calendar_gregorian.md)
  : Gregorian time unit classes

### ISO 8601 Calendar System

The ISO 8601 week date calendar system with ISO years and weeks.

- [`cal_isoweek`](https://pkg.mitchelloharawild.com/mixtime/reference/calendar_isoweek.md)
  : ISO 8601 time unit classes

### Custom Calendars

Functions for creating custom calendar systems

- [`new_calendar()`](https://pkg.mitchelloharawild.com/mixtime/reference/new_calendar.md)
  : Create a new calendar

## Time Systems

Time systems define when the boundary of a day occurs and how a day is
divided into time units. These can be combined with calendar systems to
create custom time representations.

### Civil Time System

The civil time system where each day begins at midnight on the 24-hour
clock in a specific time zone.

- [`cal_time_civil_midnight`](https://pkg.mitchelloharawild.com/mixtime/reference/calendar_time_civil.md)
  : Civil time unit classes

### Solar Time Systems

Solar time systems where day boundaries are defined by solar events
(sunrise, noon, or sunset) at specific geographic locations.

- [`cal_time_solar_sunset`](https://pkg.mitchelloharawild.com/mixtime/reference/calendar_time_solar.md)
  [`cal_time_solar_sunrise`](https://pkg.mitchelloharawild.com/mixtime/reference/calendar_time_solar.md)
  [`cal_time_solar_noon`](https://pkg.mitchelloharawild.com/mixtime/reference/calendar_time_solar.md)
  : Solar time unit classes

## Timezones

Functions for working with timezones and timezone information

- [`tz_name()`](https://pkg.mitchelloharawild.com/mixtime/reference/tz_name.md)
  : Extract timezone from an object
- [`tz_offset()`](https://pkg.mitchelloharawild.com/mixtime/reference/tz_offset.md)
  : Get timezone offset
- [`tz_abbreviation()`](https://pkg.mitchelloharawild.com/mixtime/reference/tz_abbreviation.md)
  : Get timezone abbreviation
- [`tz_transitions()`](https://pkg.mitchelloharawild.com/mixtime/reference/tz_transitions.md)
  : Get timezone transitions

## Mixtime Objects

Functions for creating and working with mixtime objects that can contain
multiple time granularities.

- [`new_mixtime()`](https://pkg.mitchelloharawild.com/mixtime/reference/new_mixtime.md)
  : Create a new mixtime
- [`as_mixtime()`](https://pkg.mitchelloharawild.com/mixtime/reference/as_mixtime.md)
  : Convert time class into a mixtime
- [`is_mixtime()`](https://pkg.mitchelloharawild.com/mixtime/reference/is_mixtime.md)
  : Check if the object is a mixtime

## Extensibility methods

These low-level functions define the relationships and labels between
time units. Adding S7 methods for them allow the creation of custom time
units and calendars.

- [`chronon_cardinality()`](https://pkg.mitchelloharawild.com/mixtime/reference/chronon_cardinality.md)
  [`chronon_cardinality.S7_methods()`](https://pkg.mitchelloharawild.com/mixtime/reference/chronon_cardinality.md)
  : Cardinality between time units
- [`chronon_convert()`](https://pkg.mitchelloharawild.com/mixtime/reference/chronon_convert.md)
  [`chronon_convert.S7_methods()`](https://pkg.mitchelloharawild.com/mixtime/reference/chronon_convert.md)
  : Convert between chronons
- [`chronon_divmod()`](https://pkg.mitchelloharawild.com/mixtime/reference/chronon_divmod.md)
  [`chronon_divmod.S7_methods()`](https://pkg.mitchelloharawild.com/mixtime/reference/chronon_divmod.md)
  : Convert between chronons of different time units
- [`chronon_common()`](https://pkg.mitchelloharawild.com/mixtime/reference/chronon_common.md)
  : Find a common chronon from a set of chronons
- [`chronon_granules()`](https://pkg.mitchelloharawild.com/mixtime/reference/chronon_granules.md)
  : Default linear time granules for chronons
- [`mt_unit()`](https://pkg.mitchelloharawild.com/mixtime/reference/mt_unit.md)
  [`mt_tz_unit()`](https://pkg.mitchelloharawild.com/mixtime/reference/mt_unit.md)
  [`mt_loc_unit()`](https://pkg.mitchelloharawild.com/mixtime/reference/mt_unit.md)
  : Base S7 class for creating new time units
- [`time_chronon()`](https://pkg.mitchelloharawild.com/mixtime/reference/time_chronon.md)
  : Obtain the chronon of a time object
- [`time_calendar()`](https://pkg.mitchelloharawild.com/mixtime/reference/time_calendar.md)
  : Obtain the calendar of a time object
- [`time_unit_full()`](https://pkg.mitchelloharawild.com/mixtime/reference/time_unit_labels.md)
  [`time_unit_abbr()`](https://pkg.mitchelloharawild.com/mixtime/reference/time_unit_labels.md)
  : Time units as a string
- [`cyclical_labels()`](https://pkg.mitchelloharawild.com/mixtime/reference/cyclical_labels.md)
  [`cyclical_labels.S7_methods()`](https://pkg.mitchelloharawild.com/mixtime/reference/cyclical_labels.md)
  : Friendly labels for cyclical relationships
- [`mixtime_valid()`](https://pkg.mitchelloharawild.com/mixtime/reference/mixtime_valid.md)
  : Check if times can be used within mixtime
- [`new_cyclical_time_fn()`](https://pkg.mitchelloharawild.com/mixtime/reference/new_cyclical_time_fn.md)
  : Cyclical time function factory
- [`new_linear_time_fn()`](https://pkg.mitchelloharawild.com/mixtime/reference/new_linear_time_fn.md)
  : Linear time function factory
- [`circsum()`](https://pkg.mitchelloharawild.com/mixtime/reference/circsum.md)
  : Compute circular rolling sums

